<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chris Moore Designs | Portfolio</title>
    
    <!-- PERFORMANCE: Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://unpkg.com">
    
    <!-- Google Analytics (GA4) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MN0NMMXNWX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-MN0NMMXNWX');
    </script>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #09090b; /* Zinc 950 */
            color: #e4e4e7; /* Zinc 200 */
            overflow-x: hidden;
        }
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .glass-panel {
            background: rgba(24, 24, 27, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #09090b; 
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #27272a; 
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #3f3f46; 
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Rich Text Styles */
        .rich-text h1 { font-size: 1.5em; font-weight: bold; margin-top: 1em; margin-bottom: 0.5em; color: white; }
        .rich-text h2 { font-size: 1.25em; font-weight: bold; margin-top: 1em; margin-bottom: 0.5em; color: #e4e4e7; }
        .rich-text p { margin-bottom: 1em; line-height: 1.6; }
        .rich-text ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 1em; }
        .rich-text ol { list-style-type: decimal; padding-left: 1.5em; margin-bottom: 1em; }
        .rich-text a { color: #22d3ee; text-decoration: underline; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- DATA SOURCE: The CMS will inject data here -->
    <script id="portfolio-data" type="application/json">
    {
    "projects": [
        {
            "id": 1842,
            "title": "Portfoli.OS",
            "category": "Apps",
            "tags": [
                "APP"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Portfolio%20Website%20Generator/header.png?raw=true",
            "description": "<p><br></p>",
            "longDescription": "<h2>Overview</h2><p>Portfoli.OS is a bespoke Content Management System (CMS) designed to bridge the gap between static site generation and dynamic content management. Built to run entirely within the Google Workspace ecosystem, it transforms a simple Google Sheet into a powerful database and backend for a professional, React-based portfolio website. This project eliminates the need for traditional hosting fees, complex database setups, or third-party CMS subscriptions, offering a truly serverless and zero-cost solution for creatives.</p><h2>Key Features</h2><ul><li><strong>Spreadsheet-as-a-Database:</strong> Utilizes Google Sheets as a relational database to store project metadata, categorized tags, gallery links, and global site settings.</li><li><strong>Visual Admin Interface:</strong> A custom-built, responsive web application (deployed via Google Apps Script) serves as the admin panel. It features:</li><li class=\"ql-indent-1\"><strong>Rich Text Editing:</strong> Integrated Quill.js editors for formatting project descriptions with bold, italics, lists, and headers.</li><li class=\"ql-indent-1\"><strong>Dynamic List Management:</strong> Drag-and-drop style interfaces for managing gallery images and downloadable files.</li><li class=\"ql-indent-1\"><strong>Live Preview &amp; Publishing:</strong> One-click publishing that generates a static HTML file, injects the latest data, and saves it directly to Google Drive for hosting via GitHub Pages or similar platforms.</li><li><strong>Smart Automation:</strong></li><li class=\"ql-indent-1\"><strong>Featured Project Logic:</strong> Automatically handles \"Featured\" status across categories, ensuring only one project per category is highlighted on the hero board.</li><li class=\"ql-indent-1\"><strong>Media Handling:</strong> Automatically detects YouTube links to generate thumbnails and embedded players, while standardizing image URLs.</li><li class=\"ql-indent-1\"><strong>Data Sanitization:</strong> Cleans and formats incoming data to ensure consistent front-end rendering.</li><li><strong>Modern Front-End:</strong> The generated website is a single-file React application styled with Tailwind CSS, featuring:</li><li class=\"ql-indent-1\"><strong>Glassmorphism Design:</strong> A modern, dark-mode aesthetic with blurred backdrops and smooth transitions.</li><li class=\"ql-indent-1\"><strong>Responsive Layouts:</strong> Fully adaptive grids for mobile, tablet, and desktop views.</li><li class=\"ql-indent-1\"><strong>Interactive Components:</strong> Custom-built lightboxes, modals, and navigation menus.</li></ul><h2>Technical Stack</h2><ul><li><strong>Backend:</strong> Google Apps Script (Serverless Node.js environment)</li><li><strong>Database:</strong> Google Sheets API</li><li><strong>Frontend (Admin):</strong> HTML5, Tailwind CSS, Vanilla JavaScript</li><li><strong>Frontend (Public Site):</strong> React 18, Tailwind CSS, Lucide React Icons</li><li><strong>Integrations:</strong> EmailJS (Serverless contact form), Google Analytics 4</li></ul><h2>The \"Why\"</h2><p>As a multidisciplinary designer, I needed a way to update my portfolio without touching code every time I finished a project. Existing solutions were either too rigid (Wix/Squarespace) or too complex/expensive for a simple static site (Contentful/Sanity). Portfoli.OS was born from the desire to own the entire stack—data, logic, and presentation—while keeping the maintenance overhead near zero.</p>",
            "video": "",
            "gallery": [],
            "launchLink": "",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": false,
            "websiteLink": "",
            "timestamp": "2026-01-12T01:03:01.269Z"
        },
        {
            "id": 1,
            "title": "Temple Nightclub - San Francisco",
            "category": "Lighting",
            "tags": [
                "LIGHTING DESIGN",
                "SYSTEMS INTEGRATION",
                "POWER DISTRIBUTION"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Lighting/Temple%20San%20Francisco/20210516_134200.jpg?raw=true",
            "description": "<p>A cool lighting project</p>",
            "longDescription": "<p>Long description here...</p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Lighting/Temple%20San%20Francisco/20210516_134200.jpg?raw=true"
            ],
            "launchLink": "",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": true,
            "websiteLink": "",
            "timestamp": "2026-01-12T01:03:01.269Z"
        },
        {
            "id": 8147,
            "title": "Emmy Stand",
            "category": "Art",
            "tags": [
                "PIXELS",
                "SOLIDWORKS",
                "3D PRINTING"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Emmy%20Stand/header.jpg?raw=true",
            "description": "<p>Emmy stand I made for a friend</p>",
            "longDescription": "<p>Text will go here</p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Emmy%20Stand/20250415_215715.jpg?raw=true",
                "https://youtube.com/shorts/zextSW-yDhg?feature=share",
                "https://youtube.com/shorts/i7x93fquHZ8?feature=share",
                "https://youtube.com/shorts/WkcuIyIyOwY?feature=share",
                "https://youtube.com/shorts/vFu9t9hsT1Y?feature=share"
            ],
            "launchLink": "",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": true,
            "websiteLink": "",
            "timestamp": "2026-01-12T01:03:01.269Z"
        },
        {
            "id": 2944,
            "title": "LithoLab",
            "category": "Apps",
            "tags": [
                "LITHOPHANE",
                "APP",
                "3D PRINTING"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/LithoLab/Screenshot%202026-01-11%20175830.png?raw=true",
            "description": "<p>Color lithophane generator with masking capabilities</p>",
            "longDescription": "<p>Color lithophane generator with masking capabilities</p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/LithoLab/Screenshot%202026-01-11%20175830.png?raw=true"
            ],
            "launchLink": "https://elusid108.github.io/LithoLab/",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": false,
            "websiteLink": "",
            "timestamp": "2026-01-12T01:03:01.269Z"
        },
        {
            "id": 3670,
            "title": "Unfold",
            "category": "Apps",
            "tags": [
                "GAME",
                "SOCIAL"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Unfold/Screenshot%202026-01-11%20183024.png?raw=true",
            "description": "<p>A Conversation Card Game for Deeper Connection</p>",
            "longDescription": "<p>A Conversation Card Game for Deeper Connection</p><p><br></p><p><strong>The Problem</strong></p><p>We stop being curious about the people we love because we think we already know them. But people are rivers, not rocks—constantly changing, growing, and evolving. Yet we rarely take the time to discover what has changed.</p><p><br></p><p><strong>The Solution</strong></p><p>Unfold is an interactive web app that guides meaningful conversations through thoughtfully crafted question cards. It's designed to help partners, friends, and family move beyond surface-level small talk and into the spaces where real connection lives.</p><p><br></p><p><strong>How It Works</strong></p><p>Players navigate through five distinct \"layers\" of conversation, each designed to progressively deepen the dialogue:</p><p><br></p><p><em>The Reset</em> — Reconnect with the familiar through warm, accessible questions</p><p><em>The Shift</em> — Uncover new perspectives and challenge assumptions</p><p><em>The Mirror</em> — Reflect on yourself within your relationships</p><p><em>The Vault </em>— Explore rarely shared stories and hidden memories</p><p><em>The Edge</em> — Embrace uncomfortable truths with courage and care</p><p>Each card presents a thoughtful question, with an optional \"Deep Dive\" that extends the conversation further. Two play modes accommodate different intentions: Journey Mode guides players through all five layers in sequence for a complete experience, while Freeplay allows exploration of any layer at will.</p><p><br></p><p><strong>The Experience</strong></p><p>The interface is intentionally minimal and warm—designed to fade into the background so the conversation can take center stage. Smooth transitions between cards and layers create a contemplative pace that encourages presence over speed.</p><p><br></p><p><strong>Built With</strong></p><p>React, TypeScript, Tailwind CSS, and Framer Motion. Fully responsive and optimized for mobile-first use, because the best conversations happen away from desks.</p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Unfold/Screenshot%202026-01-11%20183024.png?raw=true",
                "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Unfold/Screenshot%202026-01-11%20183035.png?raw=true",
                "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Unfold/Screenshot%202026-01-11%20183054.png?raw=true",
                "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Unfold/Screenshot%202026-01-11%20183115.png?raw=true",
                "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Unfold/Screenshot%202026-01-11%20183122.png?raw=true",
                "https://github.com/Elusid108/Portfolio/blob/main/media/Apps/Unfold/Screenshot%202026-01-11%20183144.png?raw=true"
            ],
            "launchLink": "deep-unfold-secrets.lovable.app",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": true,
            "websiteLink": "",
            "timestamp": "2026-01-12T01:03:01.269Z"
        },
        {
            "id": 670,
            "title": "Pixel Pyramid",
            "category": "Art",
            "tags": [
                "PIXELS",
                "FDM",
                "DYNAMIC"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Pyramid/20230717_154820.jpg?raw=true",
            "description": "<p>3-Material 3D print with internal geometry to manipulate light using black, white, and clear PLA+</p>",
            "longDescription": "<p>3-Material 3D print with internal geometry to manipulate light using black, white, and clear PLA+</p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Pyramid/20230717_154820.jpg?raw=true"
            ],
            "launchLink": "",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": false,
            "websiteLink": "",
            "timestamp": "2026-01-12T23:50:49.052Z"
        },
        {
            "id": 5632,
            "title": "Pixel Mini Pyramid",
            "category": "Art",
            "tags": [
                "PIXELS",
                "FDM",
                "AMBIENT"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Mini%20Pyramid/20230726_201532.jpg?raw=true",
            "description": "<p><br></p>",
            "longDescription": "<p><br></p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Mini%20Pyramid/20230726_201532.jpg?raw=true",
                "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Mini%20Pyramid/20230221_181031.jpg?raw=true",
                "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Mini%20Pyramid/20240316_134932.jpg?raw=true"
            ],
            "launchLink": "",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": false,
            "websiteLink": "",
            "timestamp": "2026-01-13T00:01:33.897Z"
        },
        {
            "id": 8000,
            "title": "Pixel Plane Warp",
            "category": "Art",
            "tags": [
                "PIXELS",
                "FDM",
                "AMBIENT"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Plane%20Warp/20230719_221111.jpg?raw=true",
            "description": "<p><br></p>",
            "longDescription": "<p><br></p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Art/Pixel%20Plane%20Warp/20230719_221111.jpg?raw=true"
            ],
            "launchLink": "",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": false,
            "websiteLink": "",
            "timestamp": "2026-01-13T00:04:25.482Z"
        },
        {
            "id": 8252,
            "title": "Temple Nightclub - San Francisco",
            "category": "Integration",
            "tags": [
                "OSC",
                "ArtNet",
                "sACN",
                "MIDI"
            ],
            "image": "https://github.com/Elusid108/Portfolio/blob/main/media/Integration/Temple%20-%20San%20Francisco/banner.jpg?raw=true",
            "description": "<p><br></p>",
            "longDescription": "<p><br></p>",
            "video": "",
            "gallery": [
                "https://github.com/Elusid108/Portfolio/blob/main/media/Integration/Temple%20-%20San%20Francisco/20210514_2025472.jpg?raw=true"
            ],
            "launchLink": "",
            "githubLink": "",
            "shopLink": "",
            "files": [],
            "featured": true,
            "websiteLink": "",
            "timestamp": "2026-01-13T00:14:02.780Z"
        }
    ],
    "settings": {
        "hero_1": "",
        "hero_2": "",
        "hero_3": "",
        "hero_4": "",
        "hero_5": "",
        "hero_6": "",
        "email": "chrismooredesignsllc@gmail.com",
        "instagram": "https://www.instagram.com/pixel_freak/#",
        "linkedin": "https://www.linkedin.com/in/christopher-moore-39a3b6211",
        "github": "https://github.com/Elusid108",
        "accepting_work": false,
        "emailjs_service": "service_uk1sc0n",
        "emailjs_template": "template_y1ut396",
        "emailjs_public_key": "9xxn3H48uT3zIv6Jl",
        "about_headshot": "https://github.com/Elusid108/Portfolio/blob/main/media/headshot_1.jpg?raw=true",
        "about_text": "<p>I’m a multidisciplinary technologist and designer currently building a new career in robotics, with a hands-on background in lighting design, rapid prototyping, and interactive systems. My work blends physical fabrication and digital tools, designing lighting installations, building custom electronics, developing apps, and using 3D printing to move quickly from idea to functional object. I’m most at home in the space where creative intent meets technical execution.</p><p><br></p><p>I focus on making systems that are practical, resilient, and thoughtfully designed. That means understanding circuitry and power, iterating hardware through real-world use, and building software that supports the experience without unnecessary complexity. I’m drawn to robotics because it demands the same mindset I’ve used for years, working with constraints, debugging in the physical world, and designing for safety, feedback, and reliability. I bring a builder’s perspective, strong intuition for how things fail, and a deep respect for craftsmanship.</p>"
    }
}
    </script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- ICONS ---
        const Icon = ({ children, size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        
        const Lightbulb = (p) => <Icon {...p}><path d="M15 14c.2-1 .7-1.7 1.5-2.5 1-1 1.5-2.4 1.5-3.8 0-3.9-3.1-7-7-7s-7 3.1-7 7c0 1.4.5 2.8 1.5 3.8.8.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></Icon>;
        const Cpu = (p) => <Icon {...p}><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></Icon>;
        const Printer = (p) => <Icon {...p}><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></Icon>;
        const Smartphone = (p) => <Icon {...p}><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></Icon>;
        const Github = (p) => <Icon {...p}><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></Icon>;
        const Download = (p) => <Icon {...p}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></Icon>;
        const ShoppingCart = (p) => <Icon {...p}><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></Icon>;
        const Mail = (p) => <Icon {...p}><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></Icon>;
        const Menu = (p) => <Icon {...p}><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></Icon>;
        const X = (p) => <Icon {...p}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></Icon>;
        const Zap = (p) => <Icon {...p}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></Icon>;
        const Layers = (p) => <Icon {...p}><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></Icon>;
        const Maximize2 = (p) => <Icon {...p}><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/></Icon>;
        const ImageIcon = (p) => <Icon {...p}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></Icon>;
        const ChevronLeft = (p) => <Icon {...p}><path d="m15 18-6-6 6-6"/></Icon>;
        const ChevronRight = (p) => <Icon {...p}><path d="m9 18 6-6-6-6"/></Icon>;
        const ExternalLink = (p) => <Icon {...p}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></Icon>;
        const Instagram = (p) => <Icon {...p}><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></Icon>;
        const Linkedin = (p) => <Icon {...p}><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></Icon>;
        const Palette = (p) => <Icon {...p}><circle cx="13.5" cy="6.5" r=".5"/><circle cx="17.5" cy="10.5" r=".5"/><circle cx="8.5" cy="7.5" r=".5"/><circle cx="6.5" cy="12.5" r=".5"/><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"/></Icon>;
        const Wrench = (p) => <Icon {...p}><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></Icon>;
        const FileIcon = (p) => <Icon {...p}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></Icon>;
        const Globe = (p) => <Icon {...p}><circle cx="12" cy="12" r="10"/><line x1="2" x2="22" y1="12" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></Icon>;
        const Play = (p) => <Icon {...p}><polygon points="5 3 19 12 5 21 5 3"/></Icon>;
        const Copy = (p) => <Icon {...p}><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></Icon>;
        const Send = (p) => <Icon {...p}><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></Icon>;

        // --- GLOBAL HELPER: URL NORMALIZER ---
        const ensureProtocol = (url) => {
            if (!url) return '';
            if (url.startsWith('mailto:')) return url;
            const trimmed = url.trim();
            // Check if it already starts with http:// or https://
            if (!/^https?:\/\//i.test(trimmed)) {
                return `https://${trimmed}`;
            }
            return trimmed;
        };

        const getYouTubeId = (url) => {
            if (!url || typeof url !== 'string') return null;
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=|shorts\/)([^#&?]*).*/;
            const match = url.trim().match(regExp);
            return (match && match[2].length === 11) ? match[2] : null;
        };

        // --- READ DATA ---
        let projects = [];
        let settings = {};

        try {
            const rawContent = document.getElementById('portfolio-data').textContent.trim();
            let parsedData;
            
            if (rawContent.includes('{{PORTFOLIO_DATA}}')) {
                 console.log("Template mode detected.");
                 parsedData = { projects: [], settings: {} }; // Fallback
            } else {
                parsedData = JSON.parse(rawContent);
            }

            projects = Array.isArray(parsedData) ? parsedData : (parsedData.projects || []);
            // Newest first
            projects.sort((a, b) => {
                const dateA = a.timestamp ? new Date(a.timestamp) : new Date(0);
                const dateB = b.timestamp ? new Date(b.timestamp) : new Date(0);
                return dateB - dateA;
            });
            settings = parsedData.settings || {};

        } catch (e) {
            console.error("Failed to parse portfolio data.", e);
            projects = [];
        }

        // --- COMPONENTS ---

        const SectionHeader = ({ title, subtitle, icon: Icon }) => (
            <div className="mb-12">
                <div className="flex items-center gap-3 text-cyan-400 mb-2 font-mono text-sm uppercase tracking-widest">
                    {Icon && <Icon size={16} />}
                    <span>{subtitle}</span>
                </div>
                <h2 className="text-3xl md:text-4xl font-bold">{title}</h2>
            </div>
        );

        const ProjectCard = ({ project, onOpen }) => {
            return (
                <div 
                    onClick={() => onOpen(project)}
                    className="group relative rounded-xl overflow-hidden bg-zinc-900 border border-zinc-800 hover:border-cyan-500/50 transition-all duration-300 h-full flex flex-col cursor-pointer"
                >
                    <div className="relative aspect-video overflow-hidden">
                        {/* PERFORMANCE: Lazy Loading */}
                        <img 
                            src={project.image} 
                            alt={project.title} 
                            loading="lazy"
                            decoding="async"
                            className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-80 group-hover:opacity-100" 
                        />
                        <div className="absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors duration-300 flex items-center justify-center">
                            <div className="opacity-0 group-hover:opacity-100 transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 bg-black/60 backdrop-blur px-4 py-2 rounded-full border border-white/20 flex items-center gap-2 text-white font-bold text-sm">
                                <Maximize2 size={16} /> View Project
                            </div>
                        </div>
                        <div className="absolute top-2 right-2 flex gap-1 flex-wrap justify-end">
                             {project.tags.map(tag => (
                                <span key={tag} className="px-2 py-1 bg-black/60 backdrop-blur text-[10px] font-mono rounded border border-white/10 uppercase mb-1 ml-1">
                                    {tag}
                                </span>
                             ))}
                        </div>
                    </div>
                    
                    <div className="p-5 flex-grow flex flex-col">
                        <h3 className="text-xl font-bold mb-2 text-white group-hover:text-cyan-400 transition-colors">{project.title}</h3>
                        
                        <div 
                            className="text-zinc-400 text-sm mb-4 leading-relaxed flex-grow line-clamp-3 rich-text"
                            dangerouslySetInnerHTML={{ __html: project.description }}
                        />
                        
                        <div className="pt-4 border-t border-zinc-800 flex gap-3 mt-auto flex-wrap">
                            {project.websiteLink && (
                                <a href={ensureProtocol(project.websiteLink)} target="_blank" rel="noopener noreferrer" onClick={(e) => e.stopPropagation()} className="flex items-center gap-2 text-xs font-bold text-blue-400 hover:text-blue-300 z-10 mr-2">
                                    <Globe size={14} /> WEB
                                </a>
                            )}
                            {project.launchLink && (
                                <a href={ensureProtocol(project.launchLink)} target="_blank" rel="noopener noreferrer" onClick={(e) => e.stopPropagation()} className="flex items-center gap-2 text-xs font-bold text-purple-400 hover:text-purple-300 z-10 mr-2">
                                    <ExternalLink size={14} /> LAUNCH
                                </a>
                            )}
                            {project.githubLink && (
                                <a href={ensureProtocol(project.githubLink)} target="_blank" rel="noopener noreferrer" onClick={(e) => e.stopPropagation()} className="flex items-center gap-2 text-xs font-bold text-zinc-300 hover:text-white z-10 mr-2">
                                    <Github size={14} /> CODE
                                </a>
                            )}
                            {project.shopLink && (
                                <a href={ensureProtocol(project.shopLink)} target="_blank" rel="noopener noreferrer" onClick={(e) => e.stopPropagation()} className="flex items-center gap-2 text-xs font-bold text-cyan-400 hover:text-cyan-300 z-10 ml-auto">
                                    <ShoppingCart size={14} /> KIT
                                </a>
                            )}
                            
                            {!project.shopLink && !project.launchLink && !project.githubLink && !project.websiteLink && (
                                <span className="text-xs text-zinc-600 italic">Portfolio Item</span>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const ContactModal = ({ email, onClose, emailConfig }) => {
            const [name, setName] = useState('');
            const [userEmail, setUserEmail] = useState('');
            const [message, setMessage] = useState('');
            const [isSending, setIsSending] = useState(false);

            const handleCopy = () => {
                navigator.clipboard.writeText(email);
                alert("Email address copied to clipboard!");
            };

            const handleSend = (e) => {
                e.preventDefault();
                setIsSending(true);

                if (emailConfig && emailConfig.service && emailConfig.template && emailConfig.key) {
                    emailjs.send(emailConfig.service, emailConfig.template, {
                        from_name: name,
                        from_email: userEmail,
                        message: message,
                        to_email: email
                    }, emailConfig.key)
                    .then((result) => {
                        alert('Message Sent!');
                        onClose();
                    }, (error) => {
                        console.error('EmailJS Error:', error);
                        alert('Failed to send via service. Opening default mail client instead.');
                        fallbackMailto();
                        onClose();
                    })
                    .finally(() => setIsSending(false));
                } else {
                    fallbackMailto();
                    onClose();
                }
            };

            const fallbackMailto = () => {
                const subject = `Portfolio Inquiry from ${name}`;
                const body = `Name: ${name}\nEmail: ${userEmail}\n\nMessage:\n${message}`;
                window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            };

            return (
                <div className="fixed inset-0 z-[200] flex items-center justify-center p-4">
                    <div className="absolute inset-0 bg-black/80 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative bg-zinc-900 border border-zinc-700 rounded-2xl p-8 max-w-md w-full shadow-2xl animate-fade-in">
                        <button onClick={onClose} className="absolute top-4 right-4 text-zinc-500 hover:text-white">
                            <X size={24} />
                        </button>
                        
                        <h3 className="text-2xl font-bold text-white mb-6">Contact Me</h3>
                        
                        <div className="bg-zinc-800 p-4 rounded-lg flex justify-between items-center mb-6 border border-zinc-700">
                            <span className="text-zinc-300 font-mono text-sm truncate mr-2">{email}</span>
                            <button onClick={handleCopy} className="text-cyan-400 hover:text-cyan-300 flex items-center gap-1 text-sm font-bold">
                                <Copy size={16} /> Copy
                            </button>
                        </div>

                        <form onSubmit={handleSend} className="space-y-4">
                            <div>
                                <label className="block text-xs font-bold text-zinc-500 uppercase mb-1">Your Name</label>
                                <input type="text" required value={name} onChange={e => setName(e.target.value)} className="w-full bg-zinc-950 border border-zinc-700 rounded p-3 text-white focus:border-cyan-500 focus:outline-none" />
                            </div>
                            <div>
                                <label className="block text-xs font-bold text-zinc-500 uppercase mb-1">Your Email</label>
                                <input type="email" required value={userEmail} onChange={e => setUserEmail(e.target.value)} className="w-full bg-zinc-950 border border-zinc-700 rounded p-3 text-white focus:border-cyan-500 focus:outline-none" />
                            </div>
                            <div>
                                <label className="block text-xs font-bold text-zinc-500 uppercase mb-1">Message</label>
                                <textarea required rows="4" value={message} onChange={e => setMessage(e.target.value)} className="w-full bg-zinc-950 border border-zinc-700 rounded p-3 text-white focus:border-cyan-500 focus:outline-none"></textarea>
                            </div>
                            
                            <div className="flex gap-3 pt-2">
                                <button type="button" onClick={onClose} className="flex-1 py-3 border border-zinc-700 text-zinc-300 rounded-lg hover:bg-zinc-800 font-bold">Cancel</button>
                                <button type="submit" disabled={isSending} className="flex-1 py-3 bg-cyan-600 text-white rounded-lg hover:bg-cyan-500 font-bold flex items-center justify-center gap-2">
                                    {isSending ? 'Sending...' : <><Send size={18} /> Send Mail</>}
                                </button>
                            </div>
                        </form>
                        {!emailConfig.service && (
                            <p className="text-xs text-zinc-500 mt-4 text-center">This will open your default email client.</p>
                        )}
                    </div>
                </div>
            );
        };

        const Lightbox = ({ images, initialIndex, onClose }) => {
            const [index, setIndex] = useState(initialIndex);
            const touchStartX = useRef(null);
            const touchEndX = useRef(null);
            const minSwipeDistance = 50;

            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'Escape') onClose();
                    if (e.key === 'ArrowLeft') prevImage();
                    if (e.key === 'ArrowRight') nextImage();
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [index]);

            const nextImage = () => {
                if (index < images.length - 1) setIndex(index + 1);
                else setIndex(0); 
            };

            const prevImage = () => {
                if (index > 0) setIndex(index - 1);
                else setIndex(images.length - 1); 
            };

            const onTouchStart = (e) => { touchEndX.current = null; touchStartX.current = e.targetTouches[0].clientX; };
            const onTouchMove = (e) => { touchEndX.current = e.targetTouches[0].clientX; };
            const onTouchEnd = () => {
                if (!touchStartX.current || !touchEndX.current) return;
                const distance = touchStartX.current - touchEndX.current;
                if (distance > minSwipeDistance) nextImage();
                if (distance < -minSwipeDistance) prevImage();
            };

            const currentUrl = images[index];
            const ytId = getYouTubeId(currentUrl);

            return (
                <div className="fixed inset-0 z-[200] bg-black flex items-center justify-center animate-fade-in"
                     onTouchStart={onTouchStart} onTouchMove={onTouchMove} onTouchEnd={onTouchEnd}>
                    <button onClick={onClose} className="absolute top-4 right-4 p-3 bg-zinc-800/80 rounded-full text-white hover:bg-zinc-700 transition-colors z-[210]">
                        <X size={24} />
                    </button>
                    <button onClick={prevImage} className="hidden md:block absolute left-4 p-4 text-white/50 hover:text-white transition-colors z-[210]">
                        <ChevronLeft size={48} />
                    </button>
                    <div className="w-full h-full p-4 md:p-10 flex items-center justify-center">
                        {ytId ? (
                            <iframe 
                                src={`https://www.youtube.com/embed/${ytId}?autoplay=1`} 
                                className="w-full h-full max-w-5xl aspect-video border-0 rounded-lg shadow-2xl bg-black"
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowFullScreen
                            ></iframe>
                        ) : (
                            <img src={currentUrl} alt={`Gallery ${index}`} className="max-w-full max-h-full object-contain select-none" draggable="false" />
                        )}
                    </div>
                    <button onClick={nextImage} className="hidden md:block absolute right-4 p-4 text-white/50 hover:text-white transition-colors z-[210]">
                        <ChevronRight size={48} />
                    </button>
                    <div className="absolute bottom-6 left-1/2 transform -translate-x-1/2 bg-zinc-800/80 px-4 py-2 rounded-full text-sm font-mono text-zinc-300">
                        {index + 1} / {images.length}
                    </div>
                </div>
            );
        };

        const ProjectModal = ({ project, onClose }) => {
            const [lightboxIndex, setLightboxIndex] = useState(null);
            
            useEffect(() => {
                document.body.style.overflow = 'hidden';
                return () => document.body.style.overflow = 'unset';
            }, []);

            const getFileExt = (url) => {
                if(!url) return "FILE";
                return url.split('.').pop().slice(0,4).toUpperCase();
            };

            const hasActions = project.websiteLink || project.launchLink || project.shopLink || project.githubLink;

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8">
                    <div className="absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity" onClick={onClose}></div>
                    <div className="relative bg-zinc-950 w-full max-w-5xl max-h-[90vh] rounded-2xl overflow-hidden flex flex-col border border-zinc-800 shadow-2xl animate-fade-in">
                        
                        {/* CLOSE BUTTON - Fixed outside scroll */}
                        <button onClick={(e) => { e.stopPropagation(); onClose(); }} className="absolute top-4 right-4 p-2 bg-black/50 rounded-full text-white hover:bg-red-500/80 transition-colors backdrop-blur z-50">
                            <X size={24} />
                        </button>

                        <div className="overflow-y-auto custom-scrollbar flex-1">
                            <div className="relative h-64 md:h-96 w-full">
                                <img src={project.image} alt={project.title} className="w-full h-full object-cover" />
                                <div className="absolute inset-0 bg-gradient-to-t from-zinc-950 to-transparent"></div>
                                <div className="absolute bottom-6 left-6 md:left-10 pointer-events-none">
                                    <div className="flex gap-2 mb-3">
                                        {project.tags.map(tag => (
                                            <span key={tag} className="text-xs font-mono px-2 py-1 bg-black/60 text-cyan-400 border border-cyan-500/30 rounded backdrop-blur-md uppercase tracking-wider">
                                                {tag}
                                            </span>
                                        ))}
                                    </div>
                                    <h2 className="text-3xl md:text-5xl font-bold text-white shadow-black drop-shadow-lg">{project.title}</h2>
                                </div>
                            </div>

                            <div className="p-6 md:p-10 grid md:grid-cols-3 gap-10">
                                <div className="md:col-span-2 space-y-8">
                                    <div>
                                        <h3 className="text-xl font-bold text-white mb-4">About the Project</h3>
                                        <div 
                                            className="text-zinc-300 text-lg leading-relaxed whitespace-pre-wrap rich-text"
                                            dangerouslySetInnerHTML={{ __html: project.longDescription || project.description }}
                                        />
                                    </div>

                                    {project.video && (
                                        <div className="mb-8">
                                            <h3 className="text-xl font-bold text-white mb-4">Project Video</h3>
                                            <div className="aspect-video w-full rounded-xl overflow-hidden border border-zinc-800 bg-black">
                                                {project.video.includes('youtube.com') || project.video.includes('youtu.be') ? (
                                                    <iframe 
                                                        src={project.video} 
                                                        className="w-full h-full" 
                                                        frameBorder="0" 
                                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                                        allowFullScreen
                                                    ></iframe>
                                                ) : (
                                                    <video controls className="w-full h-full">
                                                        <source src={project.video} type="video/mp4" />
                                                        Your browser does not support the video tag.
                                                    </video>
                                                )}
                                            </div>
                                        </div>
                                    )}

                                    {project.gallery && project.gallery.length > 0 && (
                                        <div>
                                            <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                                <ImageIcon size={20} className="text-zinc-500"/> Project Gallery
                                            </h3>
                                            <div className="grid grid-cols-2 gap-4">
                                                {project.gallery.map((mediaUrl, i) => {
                                                    const ytId = getYouTubeId(mediaUrl);
                                                    return (
                                                        <div key={i} onClick={() => setLightboxIndex(i)} className="rounded-lg overflow-hidden border border-zinc-800 aspect-video group cursor-pointer relative bg-zinc-900">
                                                            {ytId ? (
                                                                <>
                                                                    <img src={`https://img.youtube.com/vi/${ytId}/hqdefault.jpg`} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 opacity-90" alt={`Video ${i}`} />
                                                                    <div className="absolute inset-0 flex items-center justify-center">
                                                                        <div className="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform">
                                                                            <Play className="text-white fill-white ml-1" size={20} /> 
                                                                        </div>
                                                                    </div>
                                                                </>
                                                            ) : (
                                                                <>
                                                                    <img src={mediaUrl} className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" alt={`Gallery ${i}`} />
                                                                    <div className="absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center">
                                                                        <Maximize2 className="text-white opacity-0 group-hover:opacity-100 transition-opacity" size={24}/>
                                                                    </div>
                                                                </>
                                                            )}
                                                        </div>
                                                    );
                                                })}
                                            </div>
                                        </div>
                                    )}
                                </div>

                                <div className="space-y-6">
                                    {hasActions && (
                                        <div className="bg-zinc-900/50 border border-zinc-800 p-6 rounded-xl">
                                            <h4 className="text-sm font-bold text-zinc-500 uppercase tracking-widest mb-4">Actions</h4>
                                            <div className="space-y-3">
                                                {project.websiteLink && (
                                                    <a href={ensureProtocol(project.websiteLink)} target="_blank" rel="noopener noreferrer" className="flex items-center justify-center gap-2 w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors font-medium shadow-lg shadow-blue-900/20">
                                                        <Globe size={18} /> Visit Website
                                                    </a>
                                                )}
                                                {project.launchLink && (
                                                    <a href={ensureProtocol(project.launchLink)} target="_blank" rel="noopener noreferrer" className="flex items-center justify-center gap-2 w-full py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-lg transition-colors font-medium shadow-lg shadow-purple-900/20">
                                                        <ExternalLink size={18} /> Launch App
                                                    </a>
                                                )}
                                                {project.shopLink && (
                                                    <a href={ensureProtocol(project.shopLink)} className="flex items-center justify-center gap-2 w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors font-medium shadow-lg shadow-cyan-900/20">
                                                        <ShoppingCart size={18} /> Buy Kit
                                                    </a>
                                                )}
                                                {project.githubLink && (
                                                    <a href={ensureProtocol(project.githubLink)} target="_blank" className="flex items-center justify-center gap-2 w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg transition-colors font-medium border border-zinc-700">
                                                        <Github size={18} /> View Code
                                                    </a>
                                                )}
                                            </div>
                                        </div>
                                    )}

                                    {(project.files && project.files.length > 0) && (
                                        <div className="bg-zinc-900/50 border border-zinc-800 p-6 rounded-xl">
                                            <h4 className="text-sm font-bold text-zinc-500 uppercase tracking-widest mb-4">Downloads</h4>
                                            <ul className="space-y-3">
                                                {project.files.map((f, i) => {
                                                    const url = typeof f === 'string' ? f : f.url;
                                                    const name = typeof f === 'string' ? `File ${i+1}` : f.name;
                                                    return (
                                                        <li key={i}>
                                                            <a href={ensureProtocol(url)} download className="flex items-center gap-3 p-3 rounded-lg bg-zinc-800 hover:bg-zinc-700 transition-colors group">
                                                                <div className="bg-zinc-900 p-2 rounded text-zinc-400 group-hover:text-white">
                                                                    <FileIcon size={20}/>
                                                                </div>
                                                                <div className="flex-1 min-w-0">
                                                                    <div className="text-sm font-bold text-white truncate">{name}</div>
                                                                    <div className="text-xs text-zinc-500 uppercase tracking-wider">{getFileExt(url)}</div>
                                                                </div>
                                                                <Download size={16} className="text-zinc-500 group-hover:text-cyan-400 transition-colors"/>
                                                            </a>
                                                        </li>
                                                    );
                                                })}
                                            </ul>
                                        </div>
                                    )}

                                    {(!project.files || project.files.length === 0) && project.link && (
                                         <div className="bg-zinc-900/50 border border-zinc-800 p-6 rounded-xl">
                                            <a href={ensureProtocol(project.link)} className="flex items-center justify-center gap-2 w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg transition-colors font-medium">
                                                <Download size={18} /> Download Files
                                            </a>
                                         </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                    {lightboxIndex !== null && <Lightbox images={project.gallery} initialIndex={lightboxIndex} onClose={() => setLightboxIndex(null)} />}
                </div>
            );
        };

        const AboutMe = () => {
             // Fallback data if settings are empty
             const headshot = settings.about_headshot || "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=800&q=80";
             const text = settings.about_text || `<p>With over a decade of experience bridging the gap between physical hardware and digital experiences, I specialize in creating robust, interactive systems.</p><p>I thrive on complex challenges that require a multidisciplinary approach.</p>`;

             return (
                <section id="about" className="py-24 bg-zinc-900 border-t border-zinc-800">
                    <div className="container mx-auto px-6">
                        <SectionHeader title="About Me" subtitle="Professional Profile" icon={null} />
                        <div className="flex flex-col md:flex-row gap-12 items-start">
                            <div className="w-full md:w-1/3 aspect-square relative rounded-2xl overflow-hidden border border-zinc-700 shadow-2xl">
                                {/* PERFORMANCE: Lazy Loading on About Me Headshot */}
                                <img 
                                    src={headshot} 
                                    alt="Profile" 
                                    loading="lazy"
                                    decoding="async"
                                    className="w-full h-full object-cover" 
                                />
                            </div>
                            <div className="w-full md:w-2/3 space-y-6 text-zinc-300 text-lg leading-relaxed rich-text">
                                <div dangerouslySetInnerHTML={{ __html: text }} />
                            </div>
                        </div>
                    </div>
                </section>
             );
        };

        const Nav = () => {
            const [isOpen, setIsOpen] = useState(false);
            const [scrolled, setScrolled] = useState(false);

            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const scrollTo = (id) => {
                setIsOpen(false);
                const element = document.getElementById(id);
                if (element) element.scrollIntoView({ behavior: 'smooth' });
            };

            const links = [
                { id: 'lighting', label: 'Lighting' },
                { id: 'art', label: 'Art' },
                { id: 'circuits', label: 'Electronics' }, // Updated Label
                { id: 'apps', label: 'Apps' },
                { id: 'solutions', label: 'Fabrication' },
                { id: 'integration', label: 'Integration' },
            ];

            return (
                <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'glass-panel py-3' : 'bg-transparent py-6'}`}>
                    <div className="container mx-auto px-6 flex justify-between items-center">
                        <div className="font-bold text-xl tracking-tighter flex items-center gap-2 cursor-pointer" onClick={() => window.scrollTo(0,0)}>
                            <Zap className="text-cyan-400" size={20} />
                            <span>CHRIS MOORE<span className="text-cyan-400">.Designs</span></span>
                        </div>
                        {/* Desktop Nav */}
                        <div className="hidden lg:flex gap-6 text-sm font-medium text-zinc-400">
                            {links.map(link => (
                                <button key={link.id} onClick={() => scrollTo(link.id)} className="hover:text-white transition-colors uppercase tracking-wide text-xs">{link.label}</button>
                            ))}
                            <button onClick={() => scrollTo('about')} className="hover:text-white transition-colors uppercase tracking-wide text-xs">About</button>
                            <button onClick={() => scrollTo('contact')} className="hover:text-white transition-colors uppercase tracking-wide text-xs bg-zinc-800 px-3 py-1 rounded-full">Contact</button>
                        </div>
                        {/* Mobile Menu Button */}
                        <button className="lg:hidden text-white" onClick={() => setIsOpen(!isOpen)}>
                            {isOpen ? <X /> : <Menu />}
                        </button>
                    </div>
                    {/* Mobile Menu */}
                    {isOpen && (
                        <div className="absolute top-full left-0 w-full glass-panel border-t border-zinc-800 p-6 lg:hidden flex flex-col gap-4 animate-fade-in">
                            {links.map(link => (
                                <button key={link.id} onClick={() => scrollTo(link.id)} className="text-left text-zinc-300 uppercase tracking-widest font-bold">{link.label}</button>
                            ))}
                            <button onClick={() => scrollTo('about')} className="text-left text-zinc-300 uppercase tracking-widest font-bold">About</button>
                            <button onClick={() => scrollTo('contact')} className="text-left text-zinc-300 uppercase tracking-widest font-bold">Contact</button>
                        </div>
                    )}
                </nav>
            );
        };

        const Hero = () => {
            const scrollTo = (id) => document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' });
            
            // Get featured image for a category
            const getHeroImage = (catId) => {
                const catMap = {
                    'lighting': 'Lighting',
                    'art': 'Art',
                    'circuits': 'Circuits',
                    'apps': 'Apps',
                    'solutions': 'Solutions',
                    'integration': 'Integration'
                };
                const categoryName = catMap[catId];
                // Find project in this category that is featured
                const featuredProj = projects.find(p => p.category === categoryName && p.featured === true);
                
                // Fallback to first project in category if no featured, or placeholder
                if (featuredProj) return featuredProj.image;
                const firstProj = projects.find(p => p.category === categoryName);
                if (firstProj) return firstProj.image;
                
                return "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?auto=format&fit=crop&w=800&q=80"; // Generic fallback
            };

            const HeroBadge = ({ id, label, icon: Icon, color }) => (
                <div 
                    onClick={() => scrollTo(id)} 
                    className="relative rounded-2xl overflow-hidden group cursor-pointer border border-zinc-800 hover:border-zinc-600 transition-all duration-300"
                >
                    <div className="absolute inset-0">
                        {/* PERFORMANCE: Lazy Loading on Hero Badges */}
                        <img 
                            src={getHeroImage(id)} 
                            alt={label} 
                            loading="lazy"
                            decoding="async"
                            className="w-full h-full object-cover opacity-40 group-hover:opacity-60 transition-opacity duration-500 scale-100 group-hover:scale-110" 
                        />
                        <div className="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent"></div>
                    </div>
                    <div className="relative p-6 h-full flex flex-col justify-end">
                        <Icon className={`${color} mb-2 group-hover:scale-110 transition-transform duration-300`} size={32} />
                        <h3 className="font-bold text-xl text-white">{label}</h3>
                    </div>
                </div>
            );

            return (
                <section className="min-h-screen flex items-center justify-center relative overflow-hidden pt-24 pb-12">
                    <div className="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none">
                        <div className="absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500 rounded-full blur-[128px]"></div>
                        <div className="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600 rounded-full blur-[128px]"></div>
                    </div>

                    <div className="container mx-auto px-6 relative z-10 grid lg:grid-cols-2 gap-12 items-center">
                        <div className="space-y-6">
                            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-zinc-900 border border-zinc-700 text-xs font-mono text-cyan-400">
                                <span className={`w-2 h-2 rounded-full ${settings.accepting_work ? 'bg-cyan-400 animate-pulse' : 'bg-red-500'}`}></span>
                                {settings.accepting_work ? "AVAILABLE FOR HIRE" : "NOT ACCEPTING WORK"}
                            </div>
                            <h1 className="text-5xl md:text-7xl font-extrabold tracking-tight leading-tight">
                                Chris Moore <br />
                                <span className="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-500">
                                    Designs.
                                </span>
                            </h1>
                            <p className="text-zinc-400 text-lg max-w-lg leading-relaxed">
                                A multidisciplinary portfolio bridging the gap between digital code and physical reality. 
                                From <span className="text-white font-semibold">Lighting Design</span> to <span className="text-white font-semibold">Circuit Fabrication</span>.
                            </p>
                            <div className="flex gap-4 pt-4">
                                <button onClick={() => document.getElementById('lighting').scrollIntoView({behavior:'smooth'})} className="px-6 py-3 bg-white text-black font-bold rounded-lg hover:bg-zinc-200 transition-colors">
                                    View Work
                                </button>
                                <button onClick={() => document.getElementById('about').scrollIntoView({behavior:'smooth'})} className="px-6 py-3 border border-zinc-700 rounded-lg hover:bg-zinc-900 transition-colors text-white">
                                    About Me
                                </button>
                                {/* Removed Contact Me Button */}
                            </div>
                        </div>

                        {/* Grid - 2 cols, 3 rows */}
                        <div className="grid grid-cols-2 gap-4 h-[600px] w-full">
                            <HeroBadge id="lighting" label="Lighting" icon={Lightbulb} color="text-yellow-400" />
                            <HeroBadge id="art" label="Art" icon={Palette} color="text-pink-400" />
                            <HeroBadge id="circuits" label="Electronics" icon={Cpu} color="text-green-400" />
                            <HeroBadge id="apps" label="Apps" icon={Smartphone} color="text-purple-400" />
                            <HeroBadge id="solutions" label="Fabrication" icon={Printer} color="text-orange-400" />
                            <HeroBadge id="integration" label="Integration" icon={Layers} color="text-blue-400" />
                        </div>
                    </div>
                </section>
            );
        };

        const SimpleSection = ({ id, title, subtitle, icon, category, onOpenProject, bgColor = "bg-black" }) => {
            const sectionProjects = projects.filter(p => p.category === category);
            return (
                <section id={id} className={`py-20 ${bgColor} border-t border-zinc-900`}>
                    <div className="container mx-auto px-6">
                        <SectionHeader title={title} subtitle={subtitle} icon={icon} />
                        {sectionProjects.length > 0 ? (
                            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                                {sectionProjects.map(p => (
                                    <ProjectCard key={p.id} project={p} onOpen={onOpenProject} />
                                ))}
                            </div>
                        ) : (
                            <div className="p-8 border border-dashed border-zinc-800 rounded-xl text-center text-zinc-600">
                                No projects currently listed in this category.
                            </div>
                        )}
                    </div>
                </section>
            );
        };

        const Contact = () => {
            const [showModal, setShowModal] = useState(false);

            // Helper to ensure URLs have protocol
            const ensureProtocol = (url) => {
                if (!url) return '';
                if (url.startsWith('mailto:')) return url;
                const trimmed = url.trim();
                // Check if it already starts with http:// or https://
                if (!/^https?:\/\//i.test(trimmed)) {
                    return `https://${trimmed}`;
                }
                return trimmed;
            };

            const emailConfig = {
                service: settings.emailjs_service,
                template: settings.emailjs_template,
                key: settings.emailjs_public_key
            };

            return (
                <section id="contact" className="py-24 bg-zinc-950 border-t border-zinc-900">
                    <div className="container mx-auto px-6 text-center">
                        <h2 className="text-3xl font-bold mb-6">Let's Build Something</h2>
                        <p className="text-zinc-400 max-w-xl mx-auto mb-10">
                            Whether you need a custom lighting controller, a React Native app prototype, 
                            or a specialized PCB, I'm available for freelance work.
                        </p>
                        
                        <div className="flex flex-col md:flex-row justify-center gap-6">
                            {settings.email && (
                                <button onClick={() => setShowModal(true)} className="px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-cyan-400 hover:text-black transition-all transform hover:-translate-y-1 shadow-lg flex items-center justify-center gap-2">
                                    <Mail size={18} /> Email Me
                                </button>
                            )}
                            {settings.instagram && (
                                <a href={ensureProtocol(settings.instagram)} target="_blank" className="px-8 py-4 border border-zinc-700 text-white font-bold rounded-full hover:bg-pink-600 hover:border-pink-600 transition-all flex items-center justify-center gap-2">
                                    <Instagram size={18} /> Instagram
                                </a >
                            )}
                            {settings.linkedin && (
                                <a href={ensureProtocol(settings.linkedin)} target="_blank" className="px-8 py-4 border border-zinc-700 text-white font-bold rounded-full hover:bg-blue-600 hover:border-blue-600 transition-all flex items-center justify-center gap-2">
                                    <Linkedin size={18} /> LinkedIn
                                </a>
                            )}
                            {settings.github && (
                                <a href={ensureProtocol(settings.github)} target="_blank" className="px-8 py-4 border border-zinc-700 text-white font-bold rounded-full hover:bg-zinc-900 transition-all flex items-center justify-center gap-2">
                                    <Github size={18} /> GitHub
                                </a>
                            )}
                        </div>
                        
                        <footer className="mt-20 text-zinc-600 text-sm font-mono">
                            &copy; 2026 Chris Moore Designs. All rights reserved.
                        </footer>
                    </div>
                    {showModal && settings.email && <ContactModal email={settings.email} onClose={() => setShowModal(false)} emailConfig={emailConfig} />}
                </section>
            );
        };

        const App = () => {
            const [selectedProject, setSelectedProject] = useState(null);
            const handleOpenProject = (project) => setSelectedProject(project);
            const handleCloseProject = () => setSelectedProject(null);

            return (
                <div className="min-h-screen bg-zinc-950 text-zinc-200 selection:bg-cyan-500/30">
                    <Nav />
                    <Hero />
                    
                    <SimpleSection 
                        id="lighting" 
                        title="Illumination" 
                        subtitle="Lighting Design" 
                        icon={Lightbulb} 
                        category="Lighting" 
                        onOpenProject={handleOpenProject} 
                        bgColor="bg-black"
                    />
                    
                    <SimpleSection 
                        id="art" 
                        title="Sculpture & Form" 
                        subtitle="Art" 
                        icon={Palette} 
                        category="Art" 
                        onOpenProject={handleOpenProject} 
                        bgColor="bg-zinc-950"
                    />
                    <SimpleSection 
                        id="circuits" 
                        title="Hardware Design" 
                        subtitle="Electronics & PCBs" 
                        icon={Cpu} 
                        category="Circuits" 
                        onOpenProject={handleOpenProject} 
                        bgColor="bg-black"
                    />
                    <SimpleSection 
                        id="apps" 
                        title="Interactive Software" 
                        subtitle="Apps & Games" 
                        icon={Smartphone} 
                        category="Apps" 
                        onOpenProject={handleOpenProject} 
                        bgColor="bg-zinc-950"
                    />
                    <SimpleSection 
                        id="solutions" 
                        title="Custom Tooling" 
                        subtitle="Fabrication & Solutions" 
                        icon={Wrench} 
                        category="Solutions" 
                        onOpenProject={handleOpenProject} 
                        bgColor="bg-black"
                    />
                    <SimpleSection 
                        id="integration" 
                        title="The Backbone" 
                        subtitle="Systems Integration" 
                        icon={Layers} 
                        category="Integration" 
                        onOpenProject={handleOpenProject} 
                        bgColor="bg-zinc-950"
                    />
                    
                    <AboutMe />
                    
                    <Contact />
                    
                    {selectedProject && (
                        <ProjectModal 
                            project={selectedProject} 
                            onClose={handleCloseProject} 
                        />
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>